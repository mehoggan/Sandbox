/*
 * jniexample.c
 *
 *  Created on: Jun 2, 2013
 *      Author: mehoggan
 */

#include <jni.h>
#include <stdio.h>

JNIEXPORT jint JNICALL
Java_mehdroid_jniexample_MainActivity_fib(JNIEnv * env, jobject obj, jint f)
{
	if (f <= 0) {
		return 0;
	}

    jintArray array = (*env)->NewIntArray(env, f);
    jint length = (*env)->GetArrayLength(env, array);
    (*env)->SetIntField(env, obj, 0, 0);

    jint i = 1;
    for (; i < length; ++i) {
        if (i == 1) {
        	(*env)->SetIntField(env, obj, 1, 1);
        } else {
        	array[i - 1] + array[i - 2]
        	jint field1 = (*env)->GetIntField(env, obj, i - 1);
        	jint field2 = (*env)->GetIntField(env, obj, i - 2);
        	(*env)->SetIntField(env, obj, 0, field1 + field2);
        }
    }

    return array[f - 1];
}


