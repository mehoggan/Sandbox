/*
 * jniexample.c
 *
 *  Created on: Jun 2, 2013
 *      Author: mehoggan
 */

#include <jni.h>
#include <stdio.h>

JNIEXPORT jint JNICALL
Java_mehdroid_jniexample_MainActivity_fib(JNIEnv * env, jobject obj, jint f)
{
	if (f <= 0) {
		return 0;
	}

    jintArray array = (*env)->NewIntArray(env, f);
    jint length = (*env)->GetArrayLength(env, array);
    (*env)->SetIntField() = 0;

    jint i = 1;
    for (; i < length; ++i) {
        if (i == 1) {
            array[i] = 1;
        } else {
        	array[i] = array[i - 1] + array[i - 2];
        }
    }

    return array[f - 1];
}


